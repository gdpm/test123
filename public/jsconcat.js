"use strict";function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}angular.module("app",["ui.router","ngAnimate"]).config(["$stateProvider","$locationProvider","$urlRouterProvider",function(a,b,c){b.html5Mode({requireBase:!1,enabled:!0}),a.state("intro",{url:"/",params:{message:null,dateTime:null},controller:["$scope","$state","$stateParams","dataService",function(a,b,c,d){if(console.log("INTRO PARAMS",c),a.$on("$viewContentLoaded",function(){}),c.message){var e='\n<div class="alert alert-danger alert-dismissible errorMsg" role="alert">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  <h4><strong>Error!</strong> '+c.message+", try again later</h4>\n</div>",f=$(e);f.appendTo("#errorContainer"),f.hide(),f.slideDown(250),console.log("Shown")}a.nameRegex=d.nameRegex,a.showSpinner=!1,a.server="EUNE",a.summonerName="",a.onClick=function(){var c=a.summonerName,d=a.server;b.go("champinfo",{server:d,name:c,loaded:!1})}}],templateUrl:"stage1.html"}).state("champinfo",{url:"/{server}/{name}",params:{server:null,name:null,loaded:!1},resolve:{hasProperUrl:["$state","$q","$stateParams","dataService",function(a,b,c,d){if(c.loaded)return b.resolve();var e=c.server,f=c.name;return d.hasProperData(e,f)?b.resolve():b.reject({newState:"intro",message:"WrongUrl"})}],loadPlayerData:["$timeout","$q","$stateParams","dataService","$document",function(a,b,c,d,e){if(c.loaded)return b.resolve();var f=angular.element('<div class=\'cover\'><div class="spinner">\n                            <div class="bounce1"></div>\n                            <div class="bounce2"></div>\n                            <div class="bounce3"></div>\n                        </div></div>'),g=e.find("body");return g.append(f),d.getData(c.server,c.name).then(function(a){return a.error?b.reject({newState:"intro",message:a.error}):a})["finally"](function(){f.remove(),f=null})}]},controller:"dataController",templateUrl:"stage2.html"}),c.otherwise(function(a){var b=a.get("$state");b.go("intro")})}]).run(["$rootScope","$state",function(a,b){a.$on("$stateChangeError",function(a,c,d,e,f,g){"intro"===g.newState&&(console.log("StateChangeError",g),g.message?b.go("intro",{message:g.message,dateTime:+new Date}):b.go("intro"))})}]),angular.module("app").controller("dataController",["$scope","$stateParams","$state","loadPlayerData","$timeout","$q",function(a,b,c,d,e,f){var g;a.params=b,a.server=b.server,a.summonerName=b.name,a.queryUser=function(){var b=a.summonerName,d=a.server;c.go("champinfo",{server:d,name:b,loaded:!1})};var h=["#ff0000","#ff6600","#33cc33"],i="#ffffff",j="#ffffff",k=new JustGage((g={id:"gaugeGpm",value:0,min:0,max:100,symbol:"%",title:"GPM",pointer:!0,titleFontColor:i,valueFontColor:j,relativeGaugeSize:!0,minLabelMinFontSize:15,maxLabelMinFontSize:15,levelColors:h},_defineProperty(g,"titleFontColor",i),_defineProperty(g,"pointerOptions",{toplength:-15,bottomlength:10,bottomwidth:12,color:"#8e8e93",stroke:"#ffffff",stroke_width:3,stroke_linecap:"round"}),_defineProperty(g,"gaugeWidthScale",1),_defineProperty(g,"counter",!0),g)),l=new JustGage({id:"gaugeKda",value:0,min:0,max:100,title:"KDA",symbol:"%",pointer:!0,relativeGaugeSize:!0,minLabelMinFontSize:15,maxLabelMinFontSize:15,levelColors:h,titleFontColor:i,valueFontColor:j,pointerOptions:{toplength:-15,bottomlength:10,bottomwidth:12,color:"#8e8e93",stroke:"#ffffff",stroke_width:3,stroke_linecap:"round"},gaugeWidthScale:1,counter:!0}),m=new JustGage({id:"gaugeKp",value:0,min:0,max:100,symbol:"%",title:"KP",pointer:!0,relativeGaugeSize:!0,minLabelMinFontSize:15,maxLabelMinFontSize:15,levelColors:h,titleFontColor:i,valueFontColor:j,pointerOptions:{toplength:-15,bottomlength:10,bottomwidth:12,color:"#8e8e93",stroke:"#ffffff",stroke_width:3,stroke_linecap:"round"},gaugeWidthScale:1,counter:!0}),n=900,o=new JustGage({id:"gaugeOverall",value:0,title:"OVERALL",min:0,max:1e3,symbol:"p",pointer:!0,relativeGaugeSize:!0,minLabelMinFontSize:15,maxLabelMinFontSize:15,levelColors:h,titleFontColor:i,titleMinFontSize:20,refreshAnimationType:"<>",donutStartAngle:0,refreshAnimationTime:n,valueFontColor:j,pointerOptions:{toplength:-7,bottomlength:10,bottomwidth:6,color:"#8e8e93",stroke:"#ffffff",stroke_width:1,stroke_linecap:"round"},donut:!0,gaugeWidthScale:.6,counter:!0,onAnimationEnd:function(){return console.log("animend")}}),p=[500,200,200,500,n],q=["Weak","Not bad","Great"],r=[400,700],s=d.overallPoints>r[1]?q[2]:d.overallPoints>r[0]?q[1]:q[0];angular.element("#playerName").text(a.summonerName);var t=d.rank;angular.element('<img src="media/'+t.tier.toLowerCase()+'.png"/>').appendTo("#playerRank");var u=t.tier[0]+t.tier.toLowerCase().slice(1),v=u+" "+t.division+" ("+t.lp+") "+t.wins+"/"+t.losses;angular.element("#playerInfo").text(v),e(p[0]).then(function(){k.refresh(d.gpmPoints),e(p[1]).then(function(){l.refresh(d.kdaPoints),e(p[2]).then(function(){m.refresh(d.kpPoints),e(p[3]).then(function(){o.refresh(d.overallPoints),e(p[4]).then(function(){angular.element("#titleResult").text(s).hide().fadeIn(500)})})})})})}]),angular.module("app").run(["$templateCache",function(a){a.put("stage1.html",'<div class="champInfo">\r\n    <div id="errorContainer"></div>\r\n\r\n    <h2 class="text-center">Check your skillz</h2>\r\n    <div class="col-xs-12 col-md-12 col-md-push-0 col-lg-10 col-lg-push-1 col-xlg-8 col-xlg-push-2">\r\n        <form class="form-horizotanl" name="form">\r\n\r\n            <div class="input-group input-group-lg">\r\n                <input class="form-control text-center" type="text" placeholder="Summoner name." ng-model="summonerName" required ng-pattern="nameRegex" name="summonerName" />\r\n                <span class="input-group-addon" style="width:0px; padding-left:0px; padding-right:0px; border:none;"></span>\r\n                <select class="form-control" ng-model="server">\r\n                    <option class="r" value="EUW">EUW</option>\r\n                    <option value="EUNE">EUNE</option>\r\n                    <option value="NA">NA</option>\r\n                    <option value="KR">KR</option>\r\n\r\n                </select>\r\n                <span class="input-group-btn">\r\n                    <button class="btn btn-default" ng-click="onClick()" id="findBtn" ng-disabled="!form.$valid">Check</button>\r\n        </span>\r\n            </div>\r\n            <div>\r\n                <h4 class="alert alert-danger text-center alert-sm" ng-show="!form.$pristine && (form.$error.pattern || form.$error.required)">Type proper summoner name.</h4>\r\n            </div>\r\n        </form>\r\n    </div>\r\n\r\n    <div class="spinner" ng-if="showSpinner">\r\n        <div class="bounce1"></div>\r\n        <div class="bounce2"></div>\r\n        <div class="bounce3"></div>\r\n    </div>\r\n</div>'),a.put("stage2.html",'<nav class="snav">\r\n    <div class="input-group col-xs-4 col-xs-push-4">\r\n        <input class="form-control" type="text" placeholder="Summoner name." ng-model="summonerName" />\r\n        <span class="input-group-addon" style="width:0px; padding-left:0px; padding-right:0px; border:none;"></span>\r\n        <select class="form-control" ng-model="server">\r\n            <option value="EUW">EUW</option>\r\n            <option value="EUNE">EUNE</option>\r\n            <option value="NA">NA</option>\r\n            <option value="KR">KR</option>\r\n\r\n        </select>\r\n        <span class="input-group-btn">\r\n                    <button class="btn btn-default" ng-click="queryUser()" id="findBtn">CLICK</button>\r\n        </span>\r\n\r\n    </div>\r\n</nav>\r\n<div class="dataView">\r\n\r\n    <h1 id=\'titleResult\'></h1>\r\n    <div id="playerInfo"></div>\r\n    <div id="playerName"></div>\r\n    <div id="playerRank"></div>\r\n\r\n    <div class="col-xs-5">\r\n        <div class="row" id="gaugeGpm"></div>\r\n        <div class="row" id="gaugeKda"></div>\r\n        <div class="row" id="gaugeKp"></div>\r\n    </div>\r\n    <div class="col-xs-7">\r\n        <div class="row fullHeight">\r\n            <div id="gaugeOverall"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>')}]),angular.module("app").factory("dataService",["$http","$q","$timeout",function(a,b,c){function d(b,c){return a.get("/playerdata",{params:{name:c,server:b}}).then(function(a){return a.data})["catch"](function(a){console.log(a)})}function e(a,b){return!1}function f(a,b){return a&&-1!=m.indexOf(a.toUpperCase())&&b&&n.test(b)}function g(a,b){return c(1e3).then(function(){return k.user=b,l[a+b]=!0,k})}function h(a,b){return console.log("Querying cache",l[a+b]),null!=l[a+b]}function i(a,b){return a&&-1!=m.indexOf(a.toUpperCase())&&b&&n.test(b)}var j=!1;"localhost"!=document.location.hostname&&"127.0.0.1"!=document.location.hostname||"3000"!=document.location.port&&(j=!0);var k={name:"Kappa",server:"EUNE",rank:{division:"IV",lp:31,wins:200,losses:197,tier:"diamond"},gpmPoints:getRandomInt(0,100),kdaPoints:getRandomInt(0,100),kpPoints:getRandomInt(0,100),overallPoints:getRandomInt(555,1e3)},l={},m=["EUW","EUNE","KR","NA"],n=/^[\w\d\s]+$/;return j?{getData:g,hasLoaded:h,hasProperData:i,nameRegex:n}:{getData:d,hasLoaded:e,hasProperData:f,nameRegex:n}}]);